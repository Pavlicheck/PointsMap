const points = [{"x":7,"y":21},{"x":8,"y":13},{"x":6,"y":19},{"x":6,"y":18},{"x":10,"y":16},{"x":14,"y":13},{"x":17,"y":20},{"x":11,"y":26},{"x":16,"y":23},{"x":12,"y":21},{"x":13,"y":27},{"x":17,"y":29},{"x":17,"y":17},{"x":16,"y":29},{"x":16,"y":23},{"x":23,"y":34},{"x":24,"y":37},{"x":21,"y":25},{"x":21,"y":35},{"x":24,"y":32},{"x":24,"y":31},{"x":24,"y":32},{"x":25,"y":31},{"x":27,"y":36},{"x":30,"y":28},{"x":34,"y":34},{"x":29,"y":45},{"x":31,"y":41},{"x":34,"y":47},{"x":35,"y":48},{"x":34,"y":49},{"x":35,"y":51},{"x":38,"y":37},{"x":41,"y":52},{"x":42,"y":39},{"x":42,"y":38},{"x":40,"y":43},{"x":45,"y":51},{"x":45,"y":55},{"x":41,"y":51},{"x":46,"y":46},{"x":47,"y":46},{"x":49,"y":54},{"x":49,"y":58},{"x":50,"y":63},{"x":50,"y":64},{"x":50,"y":64},{"x":56,"y":59},{"x":51,"y":55},{"x":57,"y":64},{"x":54,"y":57},{"x":60,"y":58},{"x":63,"y":69},{"x":56,"y":68},{"x":60,"y":59},{"x":62,"y":75},{"x":61,"y":76},{"x":65,"y":64},{"x":67,"y":73},{"x":68,"y":62},{"x":70,"y":70},{"x":66,"y":82},{"x":67,"y":82},{"x":74,"y":73},{"x":67,"y":76},{"x":74,"y":78},{"x":72,"y":69},{"x":75,"y":73},{"x":79,"y":81},{"x":75,"y":86},{"x":75,"y":77},{"x":75,"y":85},{"x":74,"y":79},{"x":78,"y":91},{"x":83,"y":91},{"x":83,"y":82},{"x":79,"y":84},{"x":88,"y":84},{"x":82,"y":99},{"x":83,"y":100},{"x":87,"y":90},{"x":85,"y":87},{"x":88,"y":97},{"x":91,"y":97},{"x":92,"y":89},{"x":95,"y":94},{"x":92,"y":98},{"x":98,"y":108},{"x":94,"y":106},{"x":96,"y":96},{"x":98,"y":96},{"x":101,"y":112},{"x":100,"y":111},{"x":95,"y":99},{"x":98,"y":106},{"x":104,"y":98},{"x":98,"y":108},{"x":107,"y":112},{"x":101,"y":102},{"x":101,"y":103},{"x":108,"y":121},{"x":110,"y":106},{"x":110,"y":122},{"x":111,"y":121},{"x":109,"y":114},{"x":108,"y":123},{"x":112,"y":127},{"x":113,"y":120},{"x":112,"y":127},{"x":113,"y":128},{"x":119,"y":115},{"x":120,"y":119},{"x":116,"y":124},{"x":117,"y":122},{"x":119,"y":125},{"x":120,"y":119},{"x":126,"y":133},{"x":126,"y":121},{"x":121,"y":139},{"x":130,"y":133},{"x":122,"y":130},{"x":126,"y":136},{"x":131,"y":133},{"x":128,"y":144},{"x":134,"y":139},{"x":131,"y":134},{"x":133,"y":142},{"x":131,"y":143},{"x":133,"y":141},{"x":131,"y":137},{"x":135,"y":133},{"x":140,"y":146},{"x":138,"y":146},{"x":141,"y":140},{"x":145,"y":149},{"x":144,"y":147},{"x":141,"y":140},{"x":143,"y":150},{"x":145,"y":159},{"x":150,"y":142},{"x":144,"y":150},{"x":152,"y":157},{"x":152,"y":148},{"x":151,"y":146},{"x":148,"y":162},{"x":147,"y":163},{"x":150,"y":155},{"x":156,"y":156},{"x":151,"y":156},{"x":158,"y":152},{"x":156,"y":153},{"x":153,"y":155},{"x":161,"y":156},{"x":159,"y":158},{"x":159,"y":162},{"x":163,"y":160},{"x":158,"y":165},{"x":160,"y":173},{"x":164,"y":173},{"x":170,"y":179},{"x":169,"y":165},{"x":171,"y":177},{"x":173,"y":178},{"x":172,"y":169},{"x":166,"y":172},{"x":174,"y":175},{"x":175,"y":181},{"x":176,"y":170},{"x":178,"y":185},{"x":180,"y":176},{"x":181,"y":181},{"x":179,"y":187},{"x":175,"y":189},{"x":183,"y":190},{"x":176,"y":181},{"x":182,"y":189},{"x":184,"y":180},{"x":184,"y":186},{"x":189,"y":183},{"x":190,"y":196},{"x":187,"y":201},{"x":184,"y":186},{"x":187,"y":187},{"x":194,"y":200},{"x":188,"y":199},{"x":196,"y":193},{"x":191,"y":194},{"x":193,"y":200},{"x":194,"y":209},{"x":192,"y":204},{"x":193,"y":211},{"x":193,"y":194},{"x":196,"y":209},{"x":195,"y":200},{"x":202,"y":202},{"x":203,"y":207},{"x":207,"y":199},{"x":208,"y":203},{"x":209,"y":213},{"x":206,"y":219},{"x":207,"y":219},{"x":211,"y":214},{"x":211,"y":217},{"x":209,"y":211},{"x":214,"y":218},{"x":213,"y":220},{"x":211,"y":216},{"x":213,"y":214},{"x":211,"y":226},{"x":215,"y":214},{"x":215,"y":223},{"x":219,"y":220},{"x":215,"y":228},{"x":217,"y":218},{"x":220,"y":219},{"x":224,"y":223},{"x":223,"y":220},{"x":223,"y":234},{"x":229,"y":221},{"x":228,"y":224},{"x":223,"y":223},{"x":225,"y":235},{"x":232,"y":230},{"x":227,"y":237},{"x":234,"y":234},{"x":236,"y":228},{"x":234,"y":238},{"x":229,"y":240},{"x":230,"y":236},{"x":238,"y":249},{"x":234,"y":235},{"x":238,"y":249},{"x":241,"y":240},{"x":235,"y":240},{"x":240,"y":241},{"x":240,"y":250},{"x":238,"y":240},{"x":247,"y":247},{"x":246,"y":248},{"x":244,"y":253},{"x":247,"y":247},{"x":249,"y":248},{"x":252,"y":258},{"x":249,"y":249},{"x":251,"y":249},{"x":253,"y":254},{"x":257,"y":259},{"x":257,"y":264},{"x":251,"y":257},{"x":260,"y":269},{"x":255,"y":268},{"x":253,"y":272},{"x":255,"y":270},{"x":257,"y":262},{"x":263,"y":265},{"x":262,"y":259},{"x":262,"y":263},{"x":267,"y":260},{"x":263,"y":264},{"x":264,"y":277},{"x":269,"y":274},{"x":268,"y":282},{"x":270,"y":270},{"x":273,"y":273},{"x":268,"y":272},{"x":270,"y":274},{"x":276,"y":270},{"x":277,"y":271},{"x":274,"y":285},{"x":272,"y":282},{"x":280,"y":285},{"x":273,"y":292},{"x":276,"y":282},{"x":282,"y":277},{"x":283,"y":283},{"x":278,"y":281},{"x":285,"y":292},{"x":279,"y":282},{"x":280,"y":293},{"x":288,"y":287},{"x":287,"y":289},{"x":286,"y":297},{"x":291,"y":287},{"x":285,"y":301},{"x":290,"y":297},{"x":290,"y":289},{"x":290,"y":301},{"x":295,"y":300},{"x":296,"y":309},{"x":291,"y":304},{"x":295,"y":297},{"x":293,"y":300},{"x":301,"y":307},{"x":303,"y":296},{"x":305,"y":299},{"x":300,"y":304},{"x":304,"y":303},{"x":300,"y":316},{"x":303,"y":311},{"x":307,"y":313},{"x":303,"y":318},{"x":305,"y":313},{"x":308,"y":323},{"x":307,"y":315},{"x":314,"y":323},{"x":315,"y":309},{"x":314,"y":318},{"x":314,"y":326},{"x":311,"y":321},{"x":311,"y":319},{"x":316,"y":320},{"x":317,"y":316},{"x":323,"y":326},{"x":324,"y":323},{"x":325,"y":329},{"x":318,"y":326},{"x":325,"y":322},{"x":325,"y":337},{"x":323,"y":330},{"x":321,"y":325},{"x":324,"y":329},{"x":329,"y":330},{"x":332,"y":328},{"x":330,"y":331},{"x":329,"y":329},{"x":335,"y":340},{"x":336,"y":346},{"x":337,"y":338},{"x":336,"y":346},{"x":334,"y":337},{"x":341,"y":335},{"x":333,"y":349},{"x":341,"y":345},{"x":339,"y":349},{"x":345,"y":340},{"x":345,"y":353},{"x":345,"y":354},{"x":347,"y":350},{"x":343,"y":357},{"x":341,"y":357},{"x":345,"y":352},{"x":349,"y":357},{"x":350,"y":350},{"x":353,"y":351},{"x":354,"y":355},{"x":349,"y":366},{"x":350,"y":350},{"x":349,"y":358},{"x":353,"y":365},{"x":360,"y":370},{"x":357,"y":357},{"x":361,"y":365},{"x":360,"y":365},{"x":361,"y":363},{"x":357,"y":361},{"x":366,"y":360},{"x":361,"y":363},{"x":367,"y":365},{"x":364,"y":370},{"x":361,"y":367},{"x":371,"y":375},{"x":371,"y":370},{"x":367,"y":366},{"x":366,"y":369},{"x":367,"y":373},{"x":371,"y":384},{"x":369,"y":373},{"x":377,"y":378},{"x":376,"y":379},{"x":373,"y":387},{"x":381,"y":389},{"x":378,"y":378},{"x":377,"y":382},{"x":375,"y":387},{"x":377,"y":387},{"x":379,"y":388},{"x":381,"y":396},{"x":385,"y":394},{"x":387,"y":393},{"x":388,"y":396},{"x":382,"y":400},{"x":388,"y":402},{"x":386,"y":397},{"x":388,"y":401},{"x":391,"y":387},{"x":388,"y":400},{"x":394,"y":400},{"x":398,"y":399},{"x":392,"y":407},{"x":395,"y":392},{"x":397,"y":403},{"x":399,"y":394},{"x":395,"y":408},{"x":397,"y":401},{"x":398,"y":406},{"x":404,"y":408},{"x":404,"y":403},{"x":403,"y":409},{"x":401,"y":405},{"x":410,"y":408},{"x":407,"y":409},{"x":407,"y":421},{"x":407,"y":410},{"x":412,"y":414},{"x":409,"y":408},{"x":408,"y":426},{"x":410,"y":418},{"x":410,"y":425},{"x":417,"y":420},{"x":414,"y":416},{"x":412,"y":426},{"x":420,"y":423},{"x":416,"y":430},{"x":422,"y":427},{"x":421,"y":426},{"x":425,"y":418},{"x":426,"y":425},{"x":421,"y":431},{"x":426,"y":435},{"x":423,"y":422},{"x":430,"y":429},{"x":429,"y":436},{"x":429,"y":440},{"x":433,"y":432},{"x":429,"y":440},{"x":436,"y":431},{"x":432,"y":442},{"x":436,"y":436},{"x":437,"y":439},{"x":436,"y":436},{"x":440,"y":439},{"x":434,"y":451},{"x":436,"y":449},{"x":441,"y":448},{"x":438,"y":454},{"x":443,"y":439},{"x":444,"y":451},{"x":441,"y":442},{"x":440,"y":442},{"x":447,"y":460},{"x":449,"y":454},{"x":452,"y":452},{"x":452,"y":459},{"x":449,"y":461},{"x":454,"y":450},{"x":448,"y":461},{"x":448,"y":452},{"x":449,"y":452},{"x":456,"y":451},{"x":454,"y":458},{"x":456,"y":465},{"x":455,"y":462},{"x":463,"y":468},{"x":458,"y":458},{"x":465,"y":458},{"x":465,"y":466},{"x":460,"y":475},{"x":467,"y":478},{"x":461,"y":471},{"x":467,"y":470},{"x":464,"y":470},{"x":466,"y":464},{"x":472,"y":472},{"x":473,"y":484},{"x":470,"y":476},{"x":470,"y":481},{"x":477,"y":479},{"x":469,"y":476},{"x":478,"y":486},{"x":480,"y":474},{"x":475,"y":476},{"x":479,"y":477},{"x":481,"y":490},{"x":478,"y":491},{"x":481,"y":485},{"x":478,"y":489},{"x":485,"y":479},{"x":484,"y":493},{"x":489,"y":490},{"x":490,"y":491},{"x":484,"y":501},{"x":488,"y":502},{"x":491,"y":502},{"x":487,"y":488},{"x":491,"y":499},{"x":494,"y":502},{"x":497,"y":492},{"x":495,"y":506},{"x":498,"y":501},{"x":497,"y":496},{"x":495,"y":501},{"x":493,"y":507},{"x":502,"y":498},{"x":501,"y":497},{"x":503,"y":502},{"x":505,"y":499},{"x":505,"y":500},{"x":504,"y":502},{"x":503,"y":508},{"x":504,"y":512},{"x":508,"y":512},{"x":508,"y":511},{"x":508,"y":517},{"x":506,"y":508},{"x":511,"y":522},{"x":509,"y":524},{"x":513,"y":527},{"x":518,"y":510},{"x":514,"y":529},{"x":513,"y":521},{"x":515,"y":528},{"x":519,"y":528},{"x":521,"y":531},{"x":521,"y":520},{"x":521,"y":521},{"x":526,"y":527},{"x":519,"y":533},{"x":519,"y":536},{"x":525,"y":522},{"x":528,"y":530},{"x":524,"y":527},{"x":525,"y":535},{"x":533,"y":530},{"x":529,"y":530},{"x":534,"y":528},{"x":531,"y":532},{"x":532,"y":540},{"x":536,"y":541},{"x":532,"y":542},{"x":540,"y":535},{"x":535,"y":538},{"x":535,"y":544},{"x":539,"y":545},{"x":542,"y":552},{"x":545,"y":547},{"x":540,"y":551},{"x":545,"y":556},{"x":539,"y":542},{"x":540,"y":557},{"x":544,"y":544},{"x":550,"y":561},{"x":549,"y":547},{"x":551,"y":555},{"x":546,"y":560},{"x":552,"y":548},{"x":548,"y":556},{"x":551,"y":566},{"x":558,"y":558},{"x":557,"y":569},{"x":552,"y":556},{"x":561,"y":554},{"x":557,"y":566},{"x":554,"y":555},{"x":558,"y":561},{"x":559,"y":562},{"x":563,"y":559},{"x":567,"y":570},{"x":559,"y":577},{"x":563,"y":576},{"x":565,"y":562},{"x":565,"y":568},{"x":571,"y":568},{"x":568,"y":568},{"x":573,"y":570},{"x":573,"y":579},{"x":575,"y":571},{"x":573,"y":569},{"x":570,"y":586},{"x":576,"y":571},{"x":573,"y":577},{"x":578,"y":590},{"x":577,"y":592},{"x":580,"y":579},{"x":580,"y":594},{"x":577,"y":591},{"x":583,"y":588},{"x":587,"y":596},{"x":582,"y":595},{"x":584,"y":593},{"x":584,"y":588},{"x":582,"y":599},{"x":588,"y":587},{"x":586,"y":601},{"x":588,"y":597},{"x":589,"y":592},{"x":592,"y":605},{"x":590,"y":607},{"x":595,"y":601},{"x":599,"y":594},{"x":600,"y":597},{"x":597,"y":605},{"x":594,"y":597},{"x":596,"y":602},{"x":600,"y":597},{"x":601,"y":612},{"x":598,"y":604},{"x":602,"y":599},{"x":602,"y":606},{"x":600,"y":609},{"x":601,"y":605},{"x":602,"y":612},{"x":607,"y":611},{"x":607,"y":612},{"x":610,"y":624},{"x":611,"y":612},{"x":615,"y":618},{"x":615,"y":623},{"x":611,"y":621},{"x":612,"y":612},{"x":616,"y":613},{"x":615,"y":630},{"x":615,"y":632},{"x":617,"y":615},{"x":618,"y":623},{"x":618,"y":631},{"x":617,"y":634},{"x":623,"y":627},{"x":622,"y":622},{"x":628,"y":632},{"x":621,"y":632},{"x":624,"y":629},{"x":625,"y":633},{"x":625,"y":641},{"x":630,"y":642},{"x":627,"y":628},{"x":629,"y":630},{"x":629,"y":640},{"x":635,"y":638},{"x":632,"y":633},{"x":635,"y":637},{"x":637,"y":637},{"x":638,"y":645},{"x":640,"y":637},{"x":643,"y":638},{"x":643,"y":643},{"x":640,"y":644},{"x":647,"y":646},{"x":644,"y":641},{"x":649,"y":644},{"x":641,"y":660},{"x":647,"y":646},{"x":646,"y":644},{"x":645,"y":649},{"x":654,"y":664},{"x":647,"y":652},{"x":653,"y":655},{"x":651,"y":657},{"x":650,"y":654},{"x":653,"y":658},{"x":656,"y":659},{"x":652,"y":661},{"x":655,"y":661},{"x":659,"y":668},{"x":656,"y":669},{"x":664,"y":666},{"x":661,"y":667},{"x":662,"y":671},{"x":668,"y":670},{"x":664,"y":663},{"x":667,"y":673},{"x":663,"y":664},{"x":664,"y":665},{"x":670,"y":672},{"x":667,"y":671},{"x":672,"y":672},{"x":668,"y":684},{"x":671,"y":680},{"x":677,"y":688},{"x":672,"y":686},{"x":673,"y":688},{"x":673,"y":691},{"x":680,"y":688},{"x":678,"y":693},{"x":676,"y":690},{"x":684,"y":695},{"x":679,"y":693},{"x":681,"y":681},{"x":688,"y":686},{"x":681,"y":687},{"x":681,"y":682},{"x":690,"y":697},{"x":687,"y":699},{"x":691,"y":695},{"x":694,"y":695},{"x":694,"y":703},{"x":694,"y":698},{"x":689,"y":696},{"x":691,"y":694},{"x":696,"y":701},{"x":695,"y":699},{"x":698,"y":706},{"x":698,"y":700},{"x":700,"y":709},{"x":702,"y":704},{"x":701,"y":697},{"x":702,"y":704},{"x":699,"y":707},{"x":704,"y":715},{"x":700,"y":714},{"x":708,"y":702},{"x":709,"y":709},{"x":704,"y":713},{"x":712,"y":714},{"x":711,"y":707},{"x":708,"y":718},{"x":710,"y":718},{"x":715,"y":712},{"x":716,"y":726},{"x":712,"y":711},{"x":714,"y":721},{"x":717,"y":717},{"x":716,"y":720},{"x":716,"y":729},{"x":715,"y":734},{"x":721,"y":731},{"x":721,"y":721},{"x":718,"y":723},{"x":727,"y":730},{"x":721,"y":730},{"x":730,"y":731},{"x":730,"y":734},{"x":728,"y":732},{"x":725,"y":725},{"x":731,"y":728},{"x":735,"y":737},{"x":730,"y":733},{"x":728,"y":737},{"x":738,"y":732},{"x":731,"y":749},{"x":736,"y":734},{"x":741,"y":743},{"x":742,"y":736},{"x":738,"y":736},{"x":738,"y":745},{"x":745,"y":743},{"x":744,"y":742},{"x":744,"y":750},{"x":741,"y":756},{"x":744,"y":755},{"x":748,"y":760},{"x":746,"y":752},{"x":747,"y":746},{"x":745,"y":754},{"x":747,"y":747},{"x":749,"y":757},{"x":747,"y":755},{"x":756,"y":763},{"x":758,"y":759},{"x":750,"y":751},{"x":755,"y":755},{"x":761,"y":770},{"x":762,"y":766},{"x":758,"y":759},{"x":755,"y":766},{"x":761,"y":774},{"x":764,"y":765},{"x":758,"y":765},{"x":767,"y":761},{"x":769,"y":761},{"x":769,"y":770},{"x":770,"y":778},{"x":763,"y":773},{"x":769,"y":770},{"x":770,"y":770},{"x":766,"y":783},{"x":768,"y":768},{"x":770,"y":786},{"x":771,"y":770},{"x":770,"y":772},{"x":771,"y":781},{"x":774,"y":791},{"x":776,"y":790},{"x":780,"y":784},{"x":775,"y":782},{"x":785,"y":790},{"x":779,"y":796},{"x":779,"y":779},{"x":785,"y":796},{"x":781,"y":790},{"x":785,"y":788},{"x":783,"y":784},{"x":790,"y":797},{"x":789,"y":794},{"x":787,"y":800},{"x":786,"y":801},{"x":787,"y":805},{"x":795,"y":807},{"x":789,"y":802},{"x":794,"y":802},{"x":794,"y":795},{"x":795,"y":807},{"x":796,"y":810},{"x":794,"y":811},{"x":802,"y":799},{"x":802,"y":815},{"x":798,"y":816},{"x":800,"y":802},{"x":804,"y":810},{"x":805,"y":801},{"x":808,"y":810},{"x":808,"y":817},{"x":808,"y":810},{"x":808,"y":812},{"x":805,"y":807},{"x":807,"y":816},{"x":816,"y":821},{"x":815,"y":814},{"x":815,"y":821},{"x":810,"y":819},{"x":816,"y":829},{"x":817,"y":827},{"x":819,"y":824},{"x":817,"y":831},{"x":816,"y":834},{"x":819,"y":819},{"x":822,"y":826},{"x":825,"y":821},{"x":823,"y":824},{"x":824,"y":821},{"x":828,"y":827},{"x":831,"y":828},{"x":829,"y":829},{"x":829,"y":833},{"x":829,"y":838},{"x":831,"y":830},{"x":834,"y":829},{"x":835,"y":841},{"x":830,"y":842},{"x":831,"y":832},{"x":838,"y":837},{"x":836,"y":836},{"x":836,"y":838},{"x":839,"y":843},{"x":842,"y":837},{"x":840,"y":855},{"x":840,"y":854},{"x":845,"y":843},{"x":845,"y":849},{"x":844,"y":854},{"x":843,"y":845},{"x":842,"y":860},{"x":846,"y":848},{"x":853,"y":854},{"x":852,"y":863},{"x":846,"y":863},{"x":850,"y":853},{"x":856,"y":858},{"x":850,"y":859},{"x":855,"y":868},{"x":853,"y":866},{"x":859,"y":871},{"x":853,"y":859},{"x":858,"y":857},{"x":861,"y":857},{"x":864,"y":873},{"x":862,"y":875},{"x":865,"y":872},{"x":860,"y":867},{"x":865,"y":863},{"x":864,"y":878},{"x":865,"y":880},{"x":863,"y":876},{"x":872,"y":865},{"x":865,"y":882},{"x":871,"y":877},{"x":874,"y":882},{"x":874,"y":886},{"x":876,"y":882},{"x":879,"y":875},{"x":871,"y":886},{"x":875,"y":880},{"x":879,"y":886},{"x":881,"y":879},{"x":883,"y":889},{"x":878,"y":884},{"x":885,"y":895},{"x":885,"y":890},{"x":887,"y":892},{"x":881,"y":883},{"x":883,"y":886},{"x":885,"y":888},{"x":884,"y":889},{"x":892,"y":893},{"x":887,"y":892},{"x":890,"y":901},{"x":893,"y":888},{"x":891,"y":892},{"x":894,"y":898},{"x":890,"y":892},{"x":900,"y":909},{"x":898,"y":898},{"x":894,"y":901},{"x":903,"y":903},{"x":898,"y":911},{"x":905,"y":913},{"x":903,"y":903},{"x":906,"y":905},{"x":908,"y":918},{"x":902,"y":906},{"x":903,"y":920},{"x":909,"y":911},{"x":904,"y":905},{"x":912,"y":915},{"x":909,"y":921},{"x":912,"y":917},{"x":916,"y":914},{"x":910,"y":922},{"x":909,"y":918},{"x":917,"y":926},{"x":916,"y":922},{"x":913,"y":923},{"x":916,"y":914},{"x":923,"y":915},{"x":921,"y":923},{"x":925,"y":927},{"x":926,"y":918},{"x":926,"y":926},{"x":926,"y":924},{"x":921,"y":931},{"x":923,"y":935},{"x":922,"y":926},{"x":928,"y":926},{"x":929,"y":942},{"x":931,"y":926},{"x":934,"y":931},{"x":928,"y":943},{"x":935,"y":936},{"x":930,"y":941},{"x":932,"y":949},{"x":940,"y":945},{"x":940,"y":941},{"x":938,"y":948},{"x":934,"y":946},{"x":941,"y":949},{"x":941,"y":942},{"x":946,"y":956},{"x":947,"y":944},{"x":941,"y":955},{"x":942,"y":946},{"x":942,"y":943},{"x":949,"y":947},{"x":948,"y":958},{"x":946,"y":958},{"x":948,"y":949},{"x":952,"y":949},{"x":951,"y":953},{"x":951,"y":961},{"x":951,"y":950},{"x":951,"y":964},{"x":958,"y":965},{"x":958,"y":966},{"x":954,"y":955},{"x":954,"y":965},{"x":962,"y":964},{"x":963,"y":968},{"x":964,"y":962},{"x":959,"y":961},{"x":961,"y":964},{"x":963,"y":967},{"x":962,"y":967},{"x":969,"y":966},{"x":969,"y":964},{"x":970,"y":969},{"x":974,"y":974},{"x":975,"y":976},{"x":972,"y":972},{"x":971,"y":982},{"x":977,"y":970},{"x":971,"y":978},{"x":973,"y":974},{"x":980,"y":989},{"x":977,"y":979},{"x":982,"y":983},{"x":983,"y":981},{"x":979,"y":993},{"x":980,"y":989},{"x":978,"y":983},{"x":985,"y":996},{"x":985,"y":997},{"x":981,"y":997},{"x":988,"y":985},{"x":991,"y":996},{"x":993,"y":986},{"x":987,"y":990},{"x":995,"y":987},{"x":996,"y":998},{"x":995,"y":991},{"x":995,"y":1003},{"x":999,"y":998},{"x":991,"y":994},{"x":1000,"y":1000},{"x":998,"y":1000},{"x":997,"y":1006},{"x":1001,"y":1007},{"x":1001,"y":1000},{"x":997,"y":1003},{"x":1005,"y":1014},{"x":1000,"y":1017},{"x":1004,"y":1011},{"x":1010,"y":1011}];

class Map {
  constructor({points, size}) {
    this.points = points;
    this.size = size;
    this.viewPortX = 0;
    this.viewPortY = 0;
  }

  pointInRange = (point) =>
    point.x >= this.viewPortX
    && point.x < this.viewPortX + this.size
    && point.y >= this.viewPortX
    && point.y < this.viewPortY + this.size;

  withOffset = (point) => (
    {
      x: point.x - this.viewPortX,
      y: point.y - this.viewPortY,
    }
  );

  visiblePoints = () => this.points
                          .filter(this.pointInRange)
                          .map(this.withOffset);

  move = ({deltaX = 0, deltaY = 0}) => {
    this.viewPortX += deltaX;
    this.viewPortY += deltaY;
  }
}

class Painter {
  constructor({canvasId, color, pointSize}) {
    const canvas = document.getElementById(canvasId);
    this.ctx = canvas.getContext('2d');
    this.ctx.fillStyle = color;
    this.pointSize = pointSize;
    this.width = canvas.width;
    this.height = canvas.height;
  }

  drawPoint = ({x, y}) => {
    this.ctx.fillRect(
      x * this.pointSize,
      y * this.pointSize,
      this.pointSize,
      this.pointSize)
  };

  clear = () => {
    this.ctx.clearRect(0, 0, this.width, this.height);
  };
}

class MapManager {
  constructor({map, painter}) {
    this.map = map;
    this.painter = painter;
  }

  draw = () => {
    this.painter.clear();
    this.map
      .visiblePoints()
      .forEach(point => {
        this.painter.drawPoint(point);
      });
  };

  move = (direction, speed = 1) => {
    switch (direction) {
      case 'up':
        this.map.move({deltaY: -1 * speed});
        break;
      case 'down':
        this.map.move({deltaY: 1 * speed});
        break;
      case 'left':
        this.map.move({deltaX: -1 * speed});
        break;
      case 'right':
        this.map.move({deltaX: 1 * speed});
        break;
    }
    this.draw();
  };
}

window.onload = () => {
  const moveHandler = (manager, speed) => event => {
    const direction = event.target.dataset.direction;
    manager.move(direction, speed)
  };

  const map = new Map({points, size: 100});
  const painter = new Painter({canvasId: 'canvas', color: '#000', pointSize: 5});
  const manager = new MapManager({map, painter});
  const actions = document.querySelector('.actions');

  manager.draw();
  actions.addEventListener('click', moveHandler(manager, 10))
};

